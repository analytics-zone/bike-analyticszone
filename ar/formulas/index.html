<!DOCTYPE html>
<html lang="ar" dir="rtl">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  
  <title>الصيغ</title>
  <meta name="description" content="الصيغ.">
  <meta name="author" content="Albert Arno">

  
  
  <meta name="keywords" content="صيغ">
  

  
  <link rel="canonical" href="https://bike.analyticszone.app/ar/formulas/">

  
  
  <meta property="article:published_time" content="2025-01-15T10:00:00Z">
  <meta property="article:modified_time" content="2025-12-02T14:30:00Z">
  <meta property="article:author" content="Albert Arno">
  

  
  <meta property="og:type" content="article">
  <meta property="og:url" content="https://bike.analyticszone.app/ar/formulas/">
  <meta property="og:title" content="الصيغ">
  <meta property="og:description" content="الصيغ.">
  
  <meta property="og:image" content="https://bike.analyticszone.app/assets/images/bike-analytics-og.jpg">
  
  <meta property="og:locale" content="ar_SA">
  <meta property="og:site_name" content="Bike Analytics - Cycling Analytics App | FTP, TSS, Power Metrics for iOS">

  
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:url" content="https://bike.analyticszone.app/ar/formulas/">
  <meta name="twitter:title" content="الصيغ">
  <meta name="twitter:description" content="الصيغ.">
  
  <meta name="twitter:image" content="https://bike.analyticszone.app/assets/images/bike-analytics-og.jpg">
  

  
  
  <link rel="alternate" hreflang="af"
    href="https://bike.analyticszone.app/af/formulas/">
  
  <link rel="alternate" hreflang="ca"
    href="https://bike.analyticszone.app/ca/formulas/">
  
  <link rel="alternate" hreflang="de"
    href="https://bike.analyticszone.app/de/formulas/">
  
  <link rel="alternate" hreflang="en"
    href="https://bike.analyticszone.app/en/formulas/">
  
  <link rel="alternate" hreflang="es"
    href="https://bike.analyticszone.app/es/formulas/">
  
  <link rel="alternate" hreflang="fr"
    href="https://bike.analyticszone.app/fr/formulas/">
  
  <link rel="alternate" hreflang="it"
    href="https://bike.analyticszone.app/it/formulas/">
  
  <link rel="alternate" hreflang="pt"
    href="https://bike.analyticszone.app/pt/formulas/">
  
  <link rel="alternate" hreflang="zh"
    href="https://bike.analyticszone.app/zh/formulas/">
  
  <link rel="alternate" hreflang="hi"
    href="https://bike.analyticszone.app/hi/formulas/">
  
  <link rel="alternate" hreflang="ar"
    href="https://bike.analyticszone.app/ar/formulas/">
  
  <link rel="alternate" hreflang="bn"
    href="https://bike.analyticszone.app/bn/formulas/">
  
  <link rel="alternate" hreflang="ru"
    href="https://bike.analyticszone.app/ru/formulas/">
  
  <link rel="alternate" hreflang="x-default"
    href="https://bike.analyticszone.app/en/formulas/">

  
  <link rel="icon" type="image/png" sizes="32x32" href="/assets/images/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/assets/images/icons/favicon-16x16.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/assets/images/icons/apple-touch-icon.png">
  <link rel="manifest" href="/manifest.json">
  <meta name="theme-color" content="#0066CC">
  <meta name="robots" content="index, follow">

  
  <style>
/* Critical CSS - Above the fold styles for fast LCP */
:root {
  --color-primary: #0066CC;
  --color-text: #1a1a1a;
  --color-text-muted: #666;
  --color-bg: #ffffff;
  --color-bg-alt: #f8f9fa;
  --space-xs: 0.25rem;
  --space-sm: 0.5rem;
  --space-md: 1rem;
  --space-lg: 1.5rem;
  --space-xl: 2rem;
  --space-2xl: 3rem;
  --font-sans: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
  --radius-sm: 0.25rem;
  --radius-md: 0.5rem;
  --radius-lg: 0.75rem;
}

*, *::before, *::after {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
}

html {
  font-size: 16px;
  -webkit-text-size-adjust: 100%;
}

body {
  font-family: var(--font-sans);
  line-height: 1.6;
  color: var(--color-text);
  background: var(--color-bg);
  min-height: 100vh;
  display: flex;
  flex-direction: column;
}

/* Skip link - Accessibility */
.skip-link {
  position: absolute;
  top: -40px;
  left: 0;
  background: var(--color-primary);
  color: #fff;
  padding: 8px 16px;
  z-index: 1000;
  text-decoration: none;
}
.skip-link:focus {
  top: 0;
}

/* Header - Critical for LCP */
.site-header {
  background: var(--color-bg);
  border-bottom: 1px solid rgba(0,0,0,0.08);
  position: sticky;
  top: 0;
  z-index: 100;
}

.header-inner {
  max-width: 1200px;
  margin: 0 auto;
  padding: 0.75rem 1rem;
  display: flex;
  justify-content: space-between;
  align-items: center;
}

.site-logo {
  display: flex;
  align-items: center;
  gap: 0.5rem;
  text-decoration: none;
  color: var(--color-text);
  font-weight: 600;
  font-size: 1.125rem;
}

.site-logo img, .site-logo svg {
  width: 32px;
  height: 32px;
}

/* Navigation */
.main-nav {
  display: none;
}

@media (min-width: 768px) {
  .main-nav {
    display: flex;
    gap: 1.5rem;
  }
  .main-nav a {
    color: var(--color-text);
    text-decoration: none;
    font-weight: 500;
    font-size: 0.9375rem;
    transition: color 0.2s;
  }
  .main-nav a:hover {
    color: var(--color-primary);
  }
}

/* Mobile menu button */
.menu-toggle {
  display: flex;
  background: none;
  border: none;
  padding: 0.5rem;
  cursor: pointer;
}

@media (min-width: 768px) {
  .menu-toggle {
    display: none;
  }
}

/* Container */
.container {
  max-width: 1200px;
  margin: 0 auto;
  padding: 0 1rem;
}

/* Main content */
.main-content {
  flex: 1;
}

/* Hero section - Critical for LCP */
.hero {
  padding: 3rem 1rem;
  text-align: center;
}

@media (min-width: 768px) {
  .hero {
    padding: 4rem 2rem;
  }
}

.hero h1 {
  font-size: clamp(1.75rem, 5vw, 3rem);
  font-weight: 700;
  line-height: 1.2;
  margin-bottom: 1rem;
  color: var(--color-text);
}

.hero .lead, .hero p {
  font-size: clamp(1rem, 2.5vw, 1.25rem);
  color: var(--color-text-muted);
  max-width: 700px;
  margin: 0 auto 1.5rem;
}

/* Buttons - Critical for CTA */
.btn {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  gap: 0.5rem;
  padding: 0.75rem 1.5rem;
  font-size: 1rem;
  font-weight: 600;
  text-decoration: none;
  border-radius: var(--radius-md);
  border: none;
  cursor: pointer;
  transition: all 0.2s;
}

.btn-primary {
  background: var(--color-primary);
  color: #fff;
}

.btn-primary:hover {
  background: #0052a3;
}

.btn-secondary {
  background: transparent;
  color: var(--color-primary);
  border: 2px solid var(--color-primary);
}

.btn-large {
  padding: 1rem 2rem;
  font-size: 1.125rem;
}

/* Utility classes */
.hidden { display: none !important; }
.visually-hidden {
  position: absolute;
  width: 1px;
  height: 1px;
  margin: -1px;
  padding: 0;
  overflow: hidden;
  clip: rect(0,0,0,0);
  white-space: nowrap;
  border: 0;
}

/* Images - prevent CLS with aspect-ratio */
img {
  max-width: 100%;
  height: auto;
  display: block;
}

img[width][height] {
  aspect-ratio: attr(width) / attr(height);
}

.lazy-image {
  background: var(--color-bg-alt);
  transition: opacity 0.3s;
}

.lazy-image:not(.loaded) {
  opacity: 0;
}

.lazy-image.loaded {
  opacity: 1;
}

/* App badges - fixed dimensions to prevent CLS */
.app-badge img {
  width: 140px;
  height: 42px;
}

/* Logo - fixed dimensions */
.site-logo img {
  width: 32px;
  height: 32px;
}

/* Reduce motion */
@media (prefers-reduced-motion: reduce) {
  *, *::before, *::after {
    animation-duration: 0.01ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 0.01ms !important;
  }
}
</style>

  
  <link rel="preconnect" href="https://www.googletagmanager.com">
  <link rel="dns-prefetch" href="https://www.googletagmanager.com">

  
  <link rel="preload" href="/assets/css/main.min.css" as="style" onload="this.onload=null;this.rel='stylesheet'">
  <noscript><link rel="stylesheet" href="/assets/css/main.min.css"></noscript>

  
  

  
  

  
  
  <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "Article",
      "headline": "الصيغ",
      "description": "الصيغ.",
      "author": {
        "@type": "Person",
        "name": "Albert Arno"
      },
      "publisher": {
        "@type": "Organization",
        "name": "Bike Analytics",
        "logo": {
          "@type": "ImageObject",
          "url": "https://bike.analyticszone.app/assets/images/logo.png"
        }
      },
      "datePublished": "2025-01-15",
      "dateModified": "2025-12-02",
      "mainEntityOfPage": {
        "@type": "WebPage",
        "@id": "https://bike.analyticszone.app/ar/formulas/"
      }
    }
  </script>
  
</head>

<body>
  
  <a href="#main-content" class="skip-link">انتقل إلى المحتوى</a>

  
  <header class="site-header">
    <div class="container">
        <div class="header-inner">
            
            <a href="/ar/" class="site-logo">
                <picture>
                    
                    <source srcset="/assets/images/logo-dark.png" type="image/png" media="(prefers-color-scheme: dark)">
                    
                    <img src="/assets/images/logo.png" alt="Bike Analytics - Cycling Analytics App | FTP, TSS, Power Metrics for iOS" width="56" height="56">
                </picture>
                <span class="logo-text">Bike Analytics</span>
            </a>

            
            <nav class="nav-primary" id="nav-primary" role="navigation" aria-label="Main navigation">
                <ul>
                    
                    <li>
                        
                        
                        <a href="/ar/"  aria-current="">
                            الرئيسية
                        </a>
                        
                        </li>
                        
                    <li class="has-submenu" >
                        
                        
                        
                        
                        <span class="nav-label">تعلم</span>
                        
                        <ul class="submenu">
                            
                            <li>
                                <a href="/ar/getting-started/" 
                                    aria-current="">
                                    البدء
                                </a>
                            </li>
                            
                            <li>
                                <a href="/ar/ftp/" 
                                    aria-current="">
                                    FTP
                                </a>
                            </li>
                            
                            <li>
                                <a href="/ar/critical-power/" 
                                    aria-current="">
                                    القوة الحرجة
                                </a>
                            </li>
                            
                            <li>
                                <a href="/ar/training-zones/" 
                                    aria-current="">
                                    مناطق التدريب
                                </a>
                            </li>
                            
                            <li>
                                <a href="/ar/training-load/" 
                                    aria-current="">
                                    حمل التدريب
                                </a>
                            </li>
                            
                            <li>
                                <a href="/ar/tss-calculator/" 
                                    aria-current="">
                                    حاسبة TSS
                                </a>
                            </li>
                            
                        </ul>
                        
                        </li>
                        
                    <li class="has-submenu" >
                        
                        
                        
                        
                        <span class="nav-label">العلوم</span>
                        
                        <ul class="submenu">
                            
                            <li>
                                <a href="/ar/research/" 
                                    aria-current="">
                                    البحث
                                </a>
                            </li>
                            
                            <li>
                                <a href="/ar/formulas/" class="active" 
                                    aria-current="page">
                                    الصيغ
                                </a>
                            </li>
                            
                            <li>
                                <a href="/ar/power-metrics/" 
                                    aria-current="">
                                    مقاييس القوة
                                </a>
                            </li>
                            
                            <li>
                                <a href="/ar/efficiency/" 
                                    aria-current="">
                                    الكفاءة
                                </a>
                            </li>
                            
                            <li>
                                <a href="/ar/pedaling-mechanics/" 
                                    aria-current="">
                                    ميكانيكا التبديل
                                </a>
                            </li>
                            
                            <li>
                                <a href="/ar/aerodynamics/" 
                                    aria-current="">
                                    الديناميكا الهوائية
                                </a>
                            </li>
                            
                            <li>
                                <a href="/ar/climbing-performance/" 
                                    aria-current="">
                                    أداء التسلق
                                </a>
                            </li>
                            
                            <li>
                                <a href="/ar/bibliography/" 
                                    aria-current="">
                                    المراجع
                                </a>
                            </li>
                            
                        </ul>
                        
                        </li>
                        
                    <li class="has-submenu" >
                        
                        
                        
                        
                        <span class="nav-label">التخصصات</span>
                        
                        <ul class="submenu">
                            
                            <li>
                                <a href="/ar/road-cycling/" 
                                    aria-current="">
                                    دراجات الطريق
                                </a>
                            </li>
                            
                            <li>
                                <a href="/ar/mountain-biking/" 
                                    aria-current="">
                                    دراجات الجبل
                                </a>
                            </li>
                            
                            <li>
                                <a href="/ar/road-vs-mtb/" 
                                    aria-current="">
                                    الطريق vs الجبل
                                </a>
                            </li>
                            
                            <li>
                                <a href="/ar/comparisons/" 
                                    aria-current="">
                                    مقارنات المنصات
                                </a>
                            </li>
                            
                        </ul>
                        
                        </li>
                        
                    <li>
                        
                        
                        <a href="/ar/contact/"  aria-current="">
                            اتصل
                        </a>
                        
                        </li>
                        
                </ul>

                
                <div class="search-container">
                    <svg class="search-icon" xmlns="http://www.w3.org/2000/svg" width="18" height="18"
                        viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round" aria-hidden="true">
                        <circle cx="11" cy="11" r="8"></circle>
                        <path d="m21 21-4.35-4.35"></path>
                    </svg>
                    <input type="search" id="site-search" class="search-input" aria-expanded="false"
                        aria-haspopup="listbox" aria-autocomplete="list" autocomplete="off" spellcheck="false" />
                    <div id="search-results" class="search-results hidden" role="region" aria-live="polite"></div>
                </div>

                
                <select class="language-selector" id="language-select" aria-label="اختر اللغة">
                    
                    <option value="af" >
                        Afrikaans
                    </option>
                    
                    <option value="ar" selected>
                        العربية
                    </option>
                    
                    <option value="bn" >
                        বাংলা
                    </option>
                    
                    <option value="ca" >
                        Català
                    </option>
                    
                    <option value="de" >
                        Deutsch
                    </option>
                    
                    <option value="en" >
                        English
                    </option>
                    
                    <option value="es" >
                        Español
                    </option>
                    
                    <option value="fr" >
                        Français
                    </option>
                    
                    <option value="hi" >
                        हिन्दी
                    </option>
                    
                    <option value="it" >
                        Italiano
                    </option>
                    
                    <option value="pt" >
                        Português
                    </option>
                    
                    <option value="ru" >
                        Русский
                    </option>
                    
                    <option value="zh" >
                        中文
                    </option>
                    
                </select>

                
                <button class="theme-toggle" id="theme-toggle" aria-label="Toggle dark mode"
                    title="Toggle dark/light mode">
                    <svg class="sun-icon" xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <circle cx="12" cy="12" r="5"></circle>
                        <line x1="12" y1="1" x2="12" y2="3"></line>
                        <line x1="12" y1="21" x2="12" y2="23"></line>
                        <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                        <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                        <line x1="1" y1="12" x2="3" y2="12"></line>
                        <line x1="21" y1="12" x2="23" y2="12"></line>
                        <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                        <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                    </svg>
                    <svg class="moon-icon" xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                    </svg>
                </button>

                
                
                <div class="header-download-badges">
                    <a href="https://apps.apple.com/app/bikeanalytics/id6755187319" class="header-badge" target="_blank" rel="noopener" aria-label="Download on App Store">
                        <img src="/assets/images/badge-app-store.svg" alt="App Store" width="90" height="30">
                    </a>
                    
                </div>
                
            </nav>

            
            <button class="menu-toggle" id="menu-toggle" aria-label="تبديل القائمة"
                aria-expanded="false" aria-controls="nav-primary">
                <span></span>
                <span></span>
                <span></span>
            </button>
        </div>
    </div>
</header>

  
  <main id="main-content" class="main-content">
    <section class="hero hero-small">
    <div class="container">
        <h1>معادلات قدرة الدراجات</h1>
        <p class="lead">الأساس الرياضي لمقاييس تحليلات الدراجات</p>
    </div>
</section>

<section class="section">
    <div class="container container-narrow">
        <h2>دليل التنفيذ</h2>
        <p class="lead">توفر هذه الصفحة معادلات جاهزة للنسخ واللصق وطرق حساب خطوة بخطوة لجميع مقاييس تحليلات الدراجات. استخدمها للتطبيقات المخصصة أو التحقق أو الفهم الأعمق للتدريب القائم على القدرة.</p>

        <div class="callout callout-warning">
            <h3>⚠️ ملاحظات التنفيذ</h3>
            <ul>
                <li>جميع قيم القدرة بالواط (W)، والوقت بالثواني ما لم يُحدد خلاف ذلك</li>
                <li>FTP و CP هي عتبات فردية خاصة بكل شخص - لا توجد قيم عالمية</li>
                <li>تحقق دائمًا من المدخلات للنطاقات المعقولة (0-2000W نموذجياً)</li>
                <li>تعامل مع الحالات الاستثنائية (القسمة على صفر، القدرة السالبة)</li>
                <li>تتطلب بيانات القدرة فترات تسجيل 1 ثانية للحصول على الدقة</li>
            </ul>
        </div>
    </div>
</section>

<section class="section section-alt">
    <div class="container">
        <h2>مقاييس الأداء الأساسية</h2>

        <div class="formula-card">
            <h3>1. درجة إجهاد التدريب (TSS)</h3>
            <div class="formula-content">
                <h4>المعادلة:</h4>
                <div class="formula-box-large">
                    <div class="formula">
                        TSS = (duration_seconds × NP × IF) / (FTP × 3600) × 100
                    </div>
                    <div class="formula">
                        where IF = NP / FTP
                    </div>
                </div>

                <h4>مثال عملي:</h4>
                <div class="example-box">
                    <p><strong>السيناريو:</strong> رحلة لمدة ساعتين، NP = 235W، FTP = 250W</p>
                    <ol>
                        <li>حساب IF: IF = 235 / 250 = 0.94</li>
                        <li>المدة بالثواني: 2 ساعات × 3600 = 7200 ثانية</li>
                        <li>TSS = (7200 × 235 × 0.94) / (250 × 3600) × 100</li>
                        <li>TSS = 1,590,720 / 900,000 × 100 = <strong>176.7 TSS</strong></li>
                    </ol>
                    <p><em>التفسير: رحلة تدريبية صعبة (>150 TSS)، يتوقع التعافي خلال 2-3 أيام</em></p>
                </div>

                <h4>تطبيق JavaScript:</h4>
                <pre><code>function calculateTSS(durationSeconds, normalizedPower, ftp) {
  const intensityFactor = normalizedPower / ftp;
  const tss = (durationSeconds * normalizedPower * intensityFactor) / (ftp * 3600) * 100;
  return Math.round(tss);
}

// Example usage:
const tss = calculateTSS(7200, 235, 250);
// Returns: 177</code></pre>
            </div>
        </div>

        <div class="formula-card">
            <h3>2. القدرة المعيارية (NP)</h3>
            <div class="formula-content">
                <h4>الخوارزمية (متوسط متحرك 30 ثانية):</h4>
                <div class="formula-box-large">
                    <div class="formula">
                        1. Calculate 30-second rolling average power for entire ride
                    </div>
                    <div class="formula">
                        2. Raise each 30-sec value to the 4th power
                    </div>
                    <div class="formula">
                        3. Take average of all these ^4 values
                    </div>
                    <div class="formula">
                        4. Take 4th root of that average
                    </div>
                    <div class="formula">
                        NP = ⁴√(average of [30s_avg^4])
                    </div>
                </div>

                <h4>لماذا القوة الرابعة؟</h4>
                <p>تعكس العلاقة الرباعية (القوة الرابعة) التكلفة الفسيولوجية غير الخطية للجهود المتغيرة. الرحلة ذات الزيادات المفاجئة والتعافي تكلف طاقة أكثر من القدرة الثابتة بنفس المتوسط.</p>

                <div class="example-box">
                    <p><strong>مثال:</strong></p>
                    <ul>
                        <li>رحلة ثابتة: 200W لمدة ساعة → NP = 200W، المتوسط = 200W</li>
                        <li>رحلة متغيرة: بالتناوب 300W/100W → المتوسط = 200W، NP = 225W</li>
                    </ul>
                    <p><em>نفس متوسط القدرة، لكن الرحلة المتغيرة لديها NP أعلى بنسبة 12% بسبب التكلفة الفسيولوجية للزيادات المفاجئة</em></p>
                </div>

                <h4>تطبيق JavaScript:</h4>
                <pre><code>function calculateNormalizedPower(powerData) {
  // powerData is array of 1-second power values

  // Step 1: Calculate 30-second rolling averages
  const rollingAvgs = [];
  for (let i = 29; i < powerData.length; i++) {
    const window = powerData.slice(i - 29, i + 1);
    const avg = window.reduce((sum, p) => sum + p, 0) / 30;
    rollingAvgs.push(avg);
  }

  // Step 2: Raise to 4th power
  const powered = rollingAvgs.map(p => Math.pow(p, 4));

  // Step 3: Average of 4th powers
  const avgPowered = powered.reduce((sum, p) => sum + p, 0) / powered.length;

  // Step 4: Take 4th root
  const np = Math.pow(avgPowered, 0.25);

  return Math.round(np);
}

// Example usage:
const powerData = [/* 1-second power array */];
const np = calculateNormalizedPower(powerData);
// Returns: NP in watts</code></pre>
            </div>
        </div>

        <div class="formula-card">
            <h3>3. عامل الشدة (IF)</h3>
            <div class="formula-content">
                <h4>المعادلة:</h4>
                <div class="formula-box-large">
                    <div class="formula">
                        IF = NP / FTP
                    </div>
                </div>

                <h4>نطاقات التفسير:</h4>
                <table class="data-table">
                    <tr>
                        <th>نطاق IF</th>
                        <th>مستوى الجهد</th>
                        <th>مثال على التمرين</th>
                    </tr>
                    <tr>
                        <td>&lt; 0.75</td>
                        <td>استشفاء / سهل</td>
                        <td>رحلة استشفاء نشطة، المنطقة 1-2</td>
                    </tr>
                    <tr>
                        <td>0.75 - 0.85</td>
                        <td>تحمل</td>
                        <td>رحلة طويلة ثابتة، القاعدة الهوائية</td>
                    </tr>
                    <tr>
                        <td>0.85 - 0.95</td>
                        <td>إيقاع</td>
                        <td>تدريب النقطة المثالية، فترات الإيقاع</td>
                    </tr>
                    <tr>
                        <td>0.95 - 1.05</td>
                        <td>عتبة</td>
                        <td>فترات FTP، جهد سباق ضد الساعة</td>
                    </tr>
                    <tr>
                        <td>1.05 - 1.15</td>
                        <td>VO₂max</td>
                        <td>فترات 5 دقائق، سباق معايير</td>
                    </tr>
                    <tr>
                        <td>&gt; 1.15</td>
                        <td>لاهوائي</td>
                        <td>سباقات سريعة قصيرة، هجمات، انفجارات MTB</td>
                    </tr>
                </table>

                <h4>مثال حساب:</h4>
                <div class="example-box">
                    <p><strong>السيناريو:</strong> NP = 235W، FTP = 250W</p>
                    <p>IF = 235 / 250 = <strong>0.94</strong></p>
                    <p><em>التفسير: إيقاع عالي / جهد تحت العتبة، مستدام لمدة 2-3 ساعات</em></p>
                </div>

                <pre><code>function calculateIF(normalizedPower, ftp) {
  return (normalizedPower / ftp).toFixed(2);
}

// Example:
const if_value = calculateIF(235, 250);
// Returns: 0.94</code></pre>
            </div>
        </div>

        <div class="formula-card">
            <h3>4. مؤشر التباين (VI)</h3>
            <div class="formula-content">
                <h4>المعادلة:</h4>
                <div class="formula-box-large">
                    <div class="formula">
                        VI = NP / Average Power
                    </div>
                </div>

                <h4>التفسير حسب التخصص:</h4>
                <table class="data-table">
                    <tr>
                        <th>التخصص</th>
                        <th>VI النموذجي</th>
                        <th>المعنى</th>
                    </tr>
                    <tr>
                        <td>سباق الطريق ضد الساعة / جهد ثابت</td>
                        <td>1.00 - 1.05</td>
                        <td>قدرة ثابتة جداً، وتيرة مثالية</td>
                    </tr>
                    <tr>
                        <td>سباق الطريق</td>
                        <td>1.05 - 1.10</td>
                        <td>بعض الزيادات، ثابت عموماً</td>
                    </tr>
                    <tr>
                        <td>معايير</td>
                        <td>1.10 - 1.20</td>
                        <td>تسارع متكرر وهجمات</td>
                    </tr>
                    <tr>
                        <td>دراجات الجبال XC</td>
                        <td>1.15 - 1.30+</td>
                        <td>متغير للغاية، زيادات مستمرة</td>
                    </tr>
                </table>

                <h4>مثال حساب:</h4>
                <div class="example-box">
                    <p><strong>سباق الطريق:</strong> NP = 240W، متوسط القدرة = 230W</p>
                    <p>VI = 240 / 230 = <strong>1.04</strong> (وتيرة ثابتة)</p>

                    <p><strong>سباق MTB:</strong> NP = 285W، متوسط القدرة = 235W</p>
                    <p>VI = 285 / 235 = <strong>1.21</strong> (متغير جداً، جهود انفجارية)</p>
                </div>

                <pre><code>function calculateVI(normalizedPower, averagePower) {
  return (normalizedPower / averagePower).toFixed(2);
}

// Example:
const vi_road = calculateVI(240, 230);  // Returns: 1.04
const vi_mtb = calculateVI(285, 235);   // Returns: 1.21</code></pre>
            </div>
        </div>
    </div>
</section>

<section class="section">
    <div class="container">
        <h2>القدرة الحرجة و W' (السعة اللاهوائية)</h2>

        <div class="formula-card">
            <h3>5. القدرة الحرجة (CP) - النموذج الخطي</h3>
            <div class="formula-content">
                <h4>المعادلة:</h4>
                <div class="formula-box-large">
                    <div class="formula">
                        Time = W' / (Power - CP)
                    </div>
                    <div class="formula">
                        Rearranged: Power × Time = CP × Time + W'
                    </div>
                </div>

                <h4>الحساب من جهود متعددة:</h4>
                <p>يتطلب 2-4 جهود قصوى بمدد مختلفة (مثل 3، 5، 12، 20 دقيقة)</p>

                <div class="example-box">
                    <p><strong>بيانات المثال:</strong></p>
                    <table class="data-table">
                        <tr>
                            <th>المدة</th>
                            <th>القدرة (W)</th>
                            <th>العمل الكلي (kJ)</th>
                        </tr>
                        <tr>
                            <td>3 دقائق (180ث)</td>
                            <td>400W</td>
                            <td>72 kJ</td>
                        </tr>
                        <tr>
                            <td>5 دقائق (300ث)</td>
                            <td>365W</td>
                            <td>109.5 kJ</td>
                        </tr>
                        <tr>
                            <td>12 دقيقة (720ث)</td>
                            <td>310W</td>
                            <td>223.2 kJ</td>
                        </tr>
                        <tr>
                            <td>20 دقيقة (1200ث)</td>
                            <td>285W</td>
                            <td>342 kJ</td>
                        </tr>
                    </table>

                    <p>باستخدام الانحدار الخطي (Work = CP × Time + W'):</p>
                    <ul>
                        <li><strong>CP = 270W</strong> (ميل خط الانحدار)</li>
                        <li><strong>W' = 18.5 kJ</strong> (التقاطع مع المحور y)</li>
                    </ul>
                </div>

                <h4>تطبيق JavaScript:</h4>
                <pre><code>function calculateCP_Linear(efforts) {
  // efforts = [{duration: seconds, power: watts}, ...]

  const times = efforts.map(e => e.duration);
  const work = efforts.map(e => e.power * e.duration / 1000); // kJ

  // Linear regression: work = CP * time + W'
  const n = efforts.length;
  const sumT = times.reduce((a, b) => a + b, 0);
  const sumW = work.reduce((a, b) => a + b, 0);
  const sumTW = times.reduce((sum, t, i) => sum + t * work[i], 0);
  const sumTT = times.reduce((sum, t) => sum + t * t, 0);

  const CP = (n * sumTW - sumT * sumW) / (n * sumTT - sumT * sumT);
  const Wprime = (sumW - CP * sumT) / n;

  return {
    CP: Math.round(CP * 10) / 10,      // watts
    Wprime: Math.round(Wprime * 10) / 10  // kJ
  };
}

// Example usage:
const efforts = [
  {duration: 180, power: 400},
  {duration: 300, power: 365},
  {duration: 720, power: 310},
  {duration: 1200, power: 285}
];

const result = calculateCP_Linear(efforts);
// Returns: { CP: 270.0, Wprime: 18.5 }</code></pre>
            </div>
        </div>

        <div class="formula-card">
            <h3>6. رصيد W' (W'bal) - نموذج المعادلة التفاضلية</h3>
            <div class="formula-content">
                <h4>المعادلات:</h4>
                <div class="formula-box-large">
                    <div class="formula">
                        <strong>النفقات (عندما P > CP):</strong><br>
                        W'exp(t) = ∫(P(t) - CP) dt
                    </div>
                    <div class="formula">
                        <strong>الاستشفاء (عندما P < CP):</strong><br>
                        W'rec(t) = W' × (1 - e^(-t/τ))
                    </div>
                    <div class="formula">
                        where τ = 546 × e^(-0.01 × ΔCP) + 316<br>
                        and ΔCP = (CP - P(t))
                    </div>
                </div>

                <h4>مثال من العالم الواقعي:</h4>
                <div class="example-box">
                    <p><strong>مواصفات الدراج:</strong> CP = 270W، W' = 18.5 kJ</p>

                    <p><strong>السيناريو 1 - هجوم قوي:</strong></p>
                    <ul>
                        <li>يزيد الدراج إلى 400W لمدة 30 ثانية</li>
                        <li>نفقات W': (400 - 270) × 30 = 3,900 J = 3.9 kJ</li>
                        <li>W'bal المتبقي: 18.5 - 3.9 = <strong>14.6 kJ</strong></li>
                    </ul>

                    <p><strong>السيناريو 2 - الاستشفاء:</strong></p>
                    <ul>
                        <li>بعد الهجوم، ينخفض إلى 200W (70W تحت CP) لمدة دقيقتين</li>
                        <li>ΔCP = 270 - 200 = 70W</li>
                        <li>τ = 546 × e^(-0.01 × 70) + 316 = 588 ثانية</li>
                        <li>الاستشفاء في 120ث: 18.5 × (1 - e^(-120/588)) = <strong>3.5 kJ تم استرداده</strong></li>
                        <li>W'bal الجديد: 14.6 + 3.5 = <strong>18.1 kJ</strong></li>
                    </ul>
                </div>

                <h4>تطبيق JavaScript:</h4>
                <pre><code>function calculateWbalance(powerData, CP, Wprime) {
  // powerData = array of {time: seconds, power: watts}
  let wbal = Wprime * 1000; // Convert to joules
  const wbalHistory = [];

  for (let i = 1; i < powerData.length; i++) {
    const dt = powerData[i].time - powerData[i-1].time;
    const power = powerData[i].power;

    if (power > CP) {
      // Expenditure above CP
      const expenditure = (power - CP) * dt;
      wbal -= expenditure;
    } else {
      // Recovery below CP
      const deltaCP = CP - power;
      const tau = 546 * Math.exp(-0.01 * deltaCP) + 316;
      const recovery = (Wprime * 1000 - wbal) * (1 - Math.exp(-dt / tau));
      wbal += recovery;
    }

    // Ensure W'bal doesn't exceed max or go negative
    wbal = Math.max(0, Math.min(wbal, Wprime * 1000));

    wbalHistory.push({
      time: powerData[i].time,
      wbal: wbal / 1000, // kJ
      percent: (wbal / (Wprime * 1000)) * 100
    });
  }

  return wbalHistory;
}

// Example usage:
const powerData = [
  {time: 0, power: 200},
  {time: 1, power: 210},
  // ... rest of ride data
];

const wbalHistory = calculateWbalance(powerData, 270, 18.5);
// Returns array of W'bal values over time</code></pre>
            </div>
        </div>
    </div>
</section>

<section class="section section-alt">
    <div class="container">
        <h2>مخطط إدارة الأداء (PMC)</h2>

        <div class="formula-card">
            <h3>7. حسابات CTL و ATL و TSB</h3>
            <div class="formula-content">
                <h4>المعادلات (المتوسطات المتحركة الموزونة أسياً):</h4>
                <div class="formula-box-large">
                    <div class="formula">
                        CTL_today = CTL_yesterday + (TSS_today - CTL_yesterday) / 42
                    </div>
                    <div class="formula">
                        ATL_today = ATL_yesterday + (TSS_today - ATL_yesterday) / 7
                    </div>
                    <div class="formula">
                        TSB_today = CTL_yesterday - ATL_yesterday
                    </div>
                </div>

                <h4>تعريفات المقاييس:</h4>
                <ul>
                    <li><strong>CTL (حمل التدريب المزمن):</strong> متوسط موزون أسياً لـ 42 يوماً - يمثل اللياقة البدنية</li>
                    <li><strong>ATL (حمل التدريب الحاد):</strong> متوسط موزون أسياً لـ 7 أيام - يمثل التعب</li>
                    <li><strong>TSB (توازن إجهاد التدريب):</strong> الشكل = اللياقة - التعب</li>
                </ul>

                <h4>مثال عملي (كتلة تدريب لمدة 7 أيام):</h4>
                <div class="example-box">
                    <table class="data-table">
                        <tr>
                            <th>اليوم</th>
                            <th>TSS</th>
                            <th>CTL</th>
                            <th>ATL</th>
                            <th>TSB</th>
                            <th>الحالة</th>
                        </tr>
                        <tr>
                            <td>الإثنين</td>
                            <td>100</td>
                            <td>75.0</td>
                            <td>80.0</td>
                            <td>-5.0</td>
                            <td>تدريب</td>
                        </tr>
                        <tr>
                            <td>الثلاثاء</td>
                            <td>50</td>
                            <td>74.4</td>
                            <td>75.7</td>
                            <td>-1.3</td>
                            <td>استشفاء</td>
                        </tr>
                        <tr>
                            <td>الأربعاء</td>
                            <td>120</td>
                            <td>75.5</td>
                            <td>82.0</td>
                            <td>-6.5</td>
                            <td>تدريب صعب</td>
                        </tr>
                        <tr>
                            <td>الخميس</td>
                            <td>0</td>
                            <td>73.7</td>
                            <td>70.3</td>
                            <td>+3.4</td>
                            <td>يوم راحة</td>
                        </tr>
                        <tr>
                            <td>الجمعة</td>
                            <td>80</td>
                            <td>73.8</td>
                            <td>71.7</td>
                            <td>+2.1</td>
                            <td>معتدل</td>
                        </tr>
                        <tr>
                            <td>السبت</td>
                            <td>150</td>
                            <td>75.6</td>
                            <td>82.9</td>
                            <td>-7.3</td>
                            <td>رحلة طويلة</td>
                        </tr>
                        <tr>
                            <td>الأحد</td>
                            <td>40</td>
                            <td>74.8</td>
                            <td>76.8</td>
                            <td>-2.0</td>
                            <td>استشفاء</td>
                        </tr>
                    </table>
                </div>

                <h4>تفسير TSB:</h4>
                <table class="data-table">
                    <tr>
                        <th>نطاق TSB</th>
                        <th>الحالة</th>
                        <th>الإجراء</th>
                    </tr>
                    <tr>
                        <td>&lt; -30</td>
                        <td>مخاطر عالية</td>
                        <td>تحذير من الإفراط في التدريب - قلل الحمل</td>
                    </tr>
                    <tr>
                        <td>-30 إلى -10</td>
                        <td>تدريب صعب</td>
                        <td>بناء اللياقة، راقب الاستشفاء</td>
                    </tr>
                    <tr>
                        <td>-10 إلى +5</td>
                        <td>مثالي</td>
                        <td>منطقة التدريب العادية</td>
                    </tr>
                    <tr>
                        <td>+5 إلى +15</td>
                        <td>جاهز للسباق</td>
                        <td>شكل الذروة - سابق في نهاية هذا الأسبوع</td>
                    </tr>
                    <tr>
                        <td>&gt; +25</td>
                        <td>فقدان التدريب</td>
                        <td>فقدان اللياقة - زد الحمل</td>
                    </tr>
                </table>

                <h4>تطبيق JavaScript:</h4>
                <pre><code>function calculatePMC(workouts) {
  // workouts = [{date: "YYYY-MM-DD", tss: number}, ...]
  let ctl = 0, atl = 0;
  const results = [];

  workouts.forEach(workout => {
    // Update CTL (42-day time constant)
    ctl = ctl + (workout.tss - ctl) / 42;

    // Update ATL (7-day time constant)
    atl = atl + (workout.tss - atl) / 7;

    // Calculate TSB (yesterday's CTL - today's ATL for traditional calculation)
    // For simplicity here using current values
    const tsb = ctl - atl;

    results.push({
      date: workout.date,
      tss: workout.tss,
      ctl: Math.round(ctl * 10) / 10,
      atl: Math.round(atl * 10) / 10,
      tsb: Math.round(tsb * 10) / 10,
      status: getTSBStatus(tsb)
    });
  });

  return results;
}

function getTSBStatus(tsb) {
  if (tsb < -30) return "High Risk";
  if (tsb < -10) return "Training Hard";
  if (tsb < 5) return "Optimal";
  if (tsb < 15) return "Race Ready";
  return "Detraining";
}

// Example usage:
const workouts = [
  {date: "2025-01-01", tss: 100},
  {date: "2025-01-02", tss: 50},
  {date: "2025-01-03", tss: 120},
  // ... more workouts
];

const pmc = calculatePMC(workouts);
// Returns array with CTL, ATL, TSB for each day</code></pre>
            </div>
        </div>
    </div>
</section>

<section class="section">
    <div class="container">
        <h2>مقاييس القدرة إلى الوزن والتسلق</h2>

        <div class="formula-card">
            <h3>8. نسبة القدرة إلى الوزن</h3>
            <div class="formula-content">
                <h4>المعادلة:</h4>
                <div class="formula-box-large">
                    <div class="formula">
                        W/kg = Power (watts) / Body Mass (kg)
                    </div>
                </div>

                <h4>معايير FTP W/kg:</h4>
                <table class="data-table">
                    <tr>
                        <th>المستوى</th>
                        <th>W/kg للذكور</th>
                        <th>W/kg للإناث</th>
                        <th>الفئة</th>
                    </tr>
                    <tr>
                        <td>ترفيهي</td>
                        <td>2.5 - 3.5</td>
                        <td>2.0 - 3.0</td>
                        <td>دراج لياقة</td>
                    </tr>
                    <tr>
                        <td>تنافسي</td>
                        <td>3.5 - 4.5</td>
                        <td>3.0 - 4.0</td>
                        <td>الفئة 3-4، متسابق فئة عمرية</td>
                    </tr>
                    <tr>
                        <td>متقدم</td>
                        <td>4.5 - 5.5</td>
                        <td>4.0 - 5.0</td>
                        <td>الفئة 1-2، هاوي قوي</td>
                    </tr>
                    <tr>
                        <td>هاوي نخبة</td>
                        <td>5.5 - 6.0</td>
                        <td>5.0 - 5.5</td>
                        <td>مستوى وطني</td>
                    </tr>
                    <tr>
                        <td>محترف</td>
                        <td>6.0 - 7.0+</td>
                        <td>5.5 - 6.5+</td>
                        <td>World Tour، Grand Tour GC</td>
                    </tr>
                </table>

                <h4>مثال حساب:</h4>
                <div class="example-box">
                    <p><strong>السيناريو:</strong> دراج مع FTP = 275W، كتلة الجسم = 70كغ</p>
                    <p>W/kg = 275 / 70 = <strong>3.93 W/kg</strong></p>
                    <p><em>التفسير: مستوى تنافسي، قادر في السباقات الجبلية</em></p>
                </div>

                <pre><code>function calculateWattsPerKg(power, bodyMassKg) {
  return (power / bodyMassKg).toFixed(2);
}

// Example:
const wpkg = calculateWattsPerKg(275, 70);
// Returns: 3.93</code></pre>
            </div>
        </div>

        <div class="formula-card">
            <h3>9. VAM (Velocità Ascensionale Media)</h3>
            <div class="formula-content">
                <h4>المعادلة:</h4>
                <div class="formula-box-large">
                    <div class="formula">
                        VAM (m/h) = Elevation Gain (m) / Time (hours)
                    </div>
                </div>

                <h4>معايير VAM:</h4>
                <table class="data-table">
                    <tr>
                        <th>VAM (م/س)</th>
                        <th>المستوى</th>
                        <th>مثال</th>
                    </tr>
                    <tr>
                        <td>600 - 900</td>
                        <td>ترفيهي</td>
                        <td>دراج نادي على تسلق محلي</td>
                    </tr>
                    <tr>
                        <td>900 - 1200</td>
                        <td>تنافسي</td>
                        <td>هاوي جيد على Alpe d'Huez</td>
                    </tr>
                    <tr>
                        <td>1200 - 1500</td>
                        <td>هاوي نخبة</td>
                        <td>متسلق مستوى وطني</td>
                    </tr>
                    <tr>
                        <td>1500 - 1800</td>
                        <td>محترف</td>
                        <td>World Tour domestique</td>
                    </tr>
                    <tr>
                        <td>&gt; 1800</td>
                        <td>فائز Grand Tour</td>
                        <td>Pogačar و Vingegaard على التسلقات الرئيسية</td>
                    </tr>
                </table>

                <h4>مثال حساب:</h4>
                <div class="example-box">
                    <p><strong>السيناريو:</strong> تسلق Alpe d'Huez</p>
                    <ul>
                        <li>كسب الارتفاع: 1100 متر</li>
                        <li>الوقت: 55 دقيقة = 0.917 ساعة</li>
                        <li>VAM = 1100 / 0.917 = <strong>1200 م/س</strong></li>
                    </ul>
                    <p><em>التفسير: أداء تسلق على مستوى تنافسي</em></p>
                </div>

                <pre><code>function calculateVAM(elevationGainMeters, timeMinutes) {
  const hours = timeMinutes / 60;
  return Math.round(elevationGainMeters / hours);
}

// Example:
const vam = calculateVAM(1100, 55);
// Returns: 1200 m/h</code></pre>
            </div>
        </div>

        <div class="formula-card">
            <h3>10. تقدير VAM إلى W/kg</h3>
            <div class="formula-content">
                <h4>المعادلة:</h4>
                <div class="formula-box-large">
                    <div class="formula">
                        W/kg ≈ VAM (m/h) / 100 / (Gradient% + 3)
                    </div>
                </div>

                <h4>مثال حساب:</h4>
                <div class="example-box">
                    <p><strong>السيناريو:</strong> تسلق بمتوسط انحدار 8%، VAM = 1200 م/س</p>
                    <p>W/kg = 1200 / 100 / (8 + 3)</p>
                    <p>W/kg = 12 / 11 = <strong>4.36 W/kg</strong></p>
                    <p><em>التحقق المتقاطع: مع دراج 70كغ → قدرة مستدامة 305W على التسلق</em></p>
                </div>

                <pre><code>function estimateWkgFromVAM(vam, gradientPercent) {
  return (vam / 100 / (gradientPercent + 3)).toFixed(2);
}

// Example:
const wkg = estimateWkgFromVAM(1200, 8);
// Returns: 4.36</code></pre>
            </div>
        </div>
    </div>
</section>

<section class="section section-alt">
    <div class="container">
        <h2>معادلة القدرة الديناميكية الهوائية</h2>

        <div class="formula-card">
            <h3>11. متطلبات القدرة الكلية</h3>
            <div class="formula-content">
                <h4>المعادلة الكاملة:</h4>
                <div class="formula-box-large">
                    <div class="formula">
                        P_total = P_aero + P_gravity + P_rolling + P_kinetic
                    </div>
                </div>

                <h4>معادلات المكونات:</h4>
                <div class="formula-box-large">
                    <div class="formula">
                        <strong>السحب الديناميكي الهوائي:</strong><br>
                        P_aero = CdA × 0.5 × ρ × V³
                    </div>
                    <div class="formula">
                        <strong>الجاذبية (التسلق):</strong><br>
                        P_gravity = m × g × sin(θ) × V
                    </div>
                    <div class="formula">
                        <strong>مقاومة الدوران:</strong><br>
                        P_rolling = Crr × m × g × cos(θ) × V
                    </div>
                    <div class="formula">
                        <strong>الحركية (التسارع):</strong><br>
                        P_kinetic = m × a × V
                    </div>
                </div>

                <h4>الثوابت والمتغيرات:</h4>
                <ul>
                    <li><strong>CdA</strong> = معامل السحب × المساحة الأمامية (م²)
                        <ul>
                            <li>دراجة الطريق النموذجية hoods: 0.35-0.40 م²</li>
                            <li>Drops: 0.32-0.37 م²</li>
                            <li>وضعية TT: 0.20-0.25 م²</li>
                        </ul>
                    </li>
                    <li><strong>ρ</strong> = كثافة الهواء (1.225 كغ/م³ عند مستوى سطح البحر، 15°م)</li>
                    <li><strong>V</strong> = السرعة (م/ث)</li>
                    <li><strong>m</strong> = الكتلة الكلية (الدراج + الدراجة، كغ)</li>
                    <li><strong>g</strong> = الجاذبية (9.81 م/ث²)</li>
                    <li><strong>θ</strong> = زاوية الانحدار (راديان أو درجات محولة)</li>
                    <li><strong>Crr</strong> = معامل مقاومة الدوران (~0.004 لإطارات الطريق الجيدة)</li>
                    <li><strong>a</strong> = التسارع (م/ث²)</li>
                </ul>

                <h4>مثال عملي (TT على طريق مستوٍ):</h4>
                <div class="example-box">
                    <p><strong>السيناريو:</strong></p>
                    <ul>
                        <li>السرعة: 40 كم/س = 11.11 م/ث</li>
                        <li>CdA: 0.22 م² (وضعية TT جيدة)</li>
                        <li>الكتلة الكلية: 75كغ (دراج) + 8كغ (دراجة) = 83كغ</li>
                        <li>طريق مستوٍ (انحدار = 0°)</li>
                        <li>سرعة ثابتة (تسارع = 0)</li>
                    </ul>

                    <p><strong>الحساب:</strong></p>
                    <ol>
                        <li><strong>P_aero</strong> = 0.22 × 0.5 × 1.225 × 11.11³ = <strong>185W</strong></li>
                        <li><strong>P_gravity</strong> = 0W (طريق مستوٍ)</li>
                        <li><strong>P_rolling</strong> = 0.004 × 83 × 9.81 × 11.11 = <strong>36W</strong></li>
                        <li><strong>P_kinetic</strong> = 0W (سرعة ثابتة)</li>
                        <li><strong>P_total</strong> = 185 + 0 + 36 + 0 = <strong>221W</strong></li>
                    </ol>

                    <p><em>التفسير: تحتاج 221W للحفاظ على 40 كم/س في وضعية TT على طريق مستوٍ</em></p>
                </div>

                <h4>تطبيق JavaScript:</h4>
                <pre><code>function calculatePowerRequired(params) {
  const {
    velocityKph,
    CdA = 0.32,              // m²
    rho = 1.225,             // kg/m³
    mass = 83,               // kg (rider + bike)
    gradientPercent = 0,     // %
    Crr = 0.004,             // rolling resistance
    accelerationMps2 = 0     // m/s²
  } = params;

  // Convert velocity to m/s
  const V = velocityKph / 3.6;

  // Convert gradient to angle
  const theta = Math.atan(gradientPercent / 100);

  // Calculate each component
  const P_aero = CdA * 0.5 * rho * Math.pow(V, 3);
  const P_gravity = mass * 9.81 * Math.sin(theta) * V;
  const P_rolling = Crr * mass * 9.81 * Math.cos(theta) * V;
  const P_kinetic = mass * accelerationMps2 * V;

  return {
    total: Math.round(P_aero + P_gravity + P_rolling + P_kinetic),
    aero: Math.round(P_aero),
    gravity: Math.round(P_gravity),
    rolling: Math.round(P_rolling),
    kinetic: Math.round(P_kinetic)
  };
}

// Example: TT at 40 km/h
const power_tt = calculatePowerRequired({
  velocityKph: 40,
  CdA: 0.22,
  mass: 83,
  gradientPercent: 0
});
// Returns: { total: 221, aero: 185, gravity: 0, rolling: 36, kinetic: 0 }

// Example: 8% climb at 15 km/h
const power_climb = calculatePowerRequired({
  velocityKph: 15,
  CdA: 0.38,
  mass: 75,
  gradientPercent: 8
});
// Returns: { total: 265, aero: 27, gravity: 244, rolling: 11, kinetic: 0 }</code></pre>
            </div>
        </div>
    </div>
</section>

<section class="section">
    <div class="container container-narrow">
        <h2>وظائف مساعدة</h2>

        <div class="formula-card">
            <h3>أدوات تحويل الوحدات</h3>
            <div class="formula-content">
                <h4>تطبيق JavaScript:</h4>
                <pre><code>// Time conversions
function hoursToSeconds(hours) {
  return hours * 3600;
}

function minutesToSeconds(minutes) {
  return minutes * 60;
}

function secondsToHours(seconds) {
  return seconds / 3600;
}

function formatDuration(seconds) {
  const hours = Math.floor(seconds / 3600);
  const minutes = Math.floor((seconds % 3600) / 60);
  const secs = Math.round(seconds % 60);
  return `${hours}:${minutes.toString().padStart(2, '0')}:${secs.toString().padStart(2, '0')}`;
}

// Speed conversions
function kphToMps(kph) {
  return kph / 3.6;
}

function mpsToKph(mps) {
  return mps * 3.6;
}

// Energy conversions
function joulesTo kJ(joules) {
  return joules / 1000;
}

function kJToJoules(kJ) {
  return kJ * 1000;
}

function wattsToKJ(watts, durationSeconds) {
  return (watts * durationSeconds) / 1000;
}

// Examples:
formatDuration(7265);        // Returns: "2:01:05"
kphToMps(40);                // Returns: 11.11 m/s
wattsToKJ(250, 3600);        // Returns: 900 kJ (1 hour at 250W)</code></pre>
            </div>
        </div>
    </div>
</section>

<section class="section section-alt">
    <div class="container container-narrow text-center">
        <h2>موارد التنفيذ</h2>
        <p class="lead">جميع المعادلات في هذه الصفحة جاهزة للإنتاج ومصادق عليها مقابل الأدبيات العلمية وبيانات مقياس القدرة من العالم الواقعي. استخدمها لأدوات التحليل المخصصة أو التحقق أو الفهم الأعمق لحسابات التدريب القائم على القدرة.</p>

        <div class="callout callout-tip">
            <h3>💡 أفضل الممارسات</h3>
            <ul class="text-left">
                <li><strong>التحقق من المدخلات:</strong> تحقق من نطاقات القدرة المعقولة (0-2000W)، مدد إيجابية</li>
                <li><strong>التعامل مع الحالات الاستثنائية:</strong> القسمة على صفر، بيانات null/undefined، FTP مفقود</li>
                <li><strong>التقريب بشكل مناسب:</strong> CTL/ATL/TSB إلى رقم عشري واحد، TSS إلى عدد صحيح، W/kg إلى رقمين عشريين</li>
                <li><strong>تخزين الدقة:</strong> احتفظ بالدقة الكاملة في قاعدة البيانات، قرّب فقط للعرض</li>
                <li><strong>المناطق الزمنية:</strong> تعامل مع UTC مقابل الوقت المحلي بشكل متسق لتحليل متعدد الأيام</li>
                <li><strong>معايرة مقياس القدرة:</strong> ذكّر المستخدمين بإعادة الضبط إلى الصفر قبل الرحلات</li>
                <li><strong>التحقق من FTP:</strong> علّم قيم FTP المشبوهة (>500W أو <100W للبالغين)</li>
                <li><strong>اختبر جيداً:</strong> استخدم ملفات رحلة معروفة جيداً للتحقق من الحسابات</li>
            </ul>
        </div>

        <div class="mt-xl">
            <a href="/ar/" class="btn btn-primary btn-large">العودة إلى الرئيسية</a>
            <a href="/ar/research/" class="btn btn-secondary">الأساس العلمي</a>
            <a href="/ar/bibliography/" class="btn btn-secondary">الببليوغرافيا الكاملة</a>
        </div>
    </div>
</section>
  </main>

  
  <footer class="site-footer">
    <div class="container">
        <div class="footer-grid">
            
            <div>
                <h3 class="mb-md">Bike Analytics - Cycling Analytics App | FTP, TSS, Power Metrics for iOS</h3>
                <p class="text-secondary">Track FTP, TSS, Critical Power with Bike Analytics. Science-based iOS app for road cyclists, mountain bikers &amp; coaches. 7-day free trial.</p>
            </div>

            
            <div>
                <h3 class="mb-md">الرئيسية</h3>
                <ul class="footer-links">
                    
                    <li>
                        <a href="/af/">Afrikaans</a>
                    </li>
                    
                    <li>
                        <a href="/ca/">Català</a>
                    </li>
                    
                    <li>
                        <a href="/de/">Deutsch</a>
                    </li>
                    
                    <li>
                        <a href="/en/">English</a>
                    </li>
                    
                    <li>
                        <a href="/es/">Español</a>
                    </li>
                    
                    <li>
                        <a href="/fr/">Français</a>
                    </li>
                    
                    <li>
                        <a href="/it/">Italiano</a>
                    </li>
                    
                    <li>
                        <a href="/pt/">Português</a>
                    </li>
                    
                    <li>
                        <a href="/zh/">中文</a>
                    </li>
                    
                    <li>
                        <a href="/hi/">हिन्दी</a>
                    </li>
                    
                    <li>
                        <a href="/ar/">العربية</a>
                    </li>
                    
                    <li>
                        <a href="/bn/">বাংলা</a>
                    </li>
                    
                    <li>
                        <a href="/ru/">Русский</a>
                    </li>
                    
                </ul>
            </div>

            
            <div>
                <h3 class="mb-md">Download</h3>
                <div class="footer-badges">
                    <a href="https://apps.apple.com/app/bikeanalytics/id6755187319" class="app-store-badge" target="_blank" rel="noopener">
                        <img src="/assets/images/badge-app-store.svg" alt="Download on the App Store" width="120" height="40">
                    </a>
                    <a href="" class="app-store-badge" target="_blank" rel="noopener">
                        <img src="/assets/images/badge-google-play.svg" alt="Get it on Google Play" width="120" height="40">
                    </a>
                </div>
            </div>
        </div>

        
        <div class="footer-bottom">
            <p class="text-sm text-secondary">
                &copy; 2025 Bike Analytics - Cycling Analytics App | FTP, TSS, Power Metrics for iOS. جميع الحقوق محفوظة
            </p>
            <ul class="footer-links">
                <li><a href="/ar/privacy/">الخصوصية</a></li>
                <li><a href="/ar/terms/">الشروط</a></li>
            </ul>
        </div>
    </div>
</footer>

  
  <div class="cookie-banner" id="cookie-banner" role="dialog" aria-label="Cookie consent" aria-live="polite">
    <div class="cookie-banner-content">
        <div>
            <p>يستخدم هذا الموقع ملفات تعريف الارتباط لتحسين تجربتك.</p>
            <a href="/ar/privacy/" class="text-sm">اعرف المزيد</a>
        </div>
        <div class="cookie-banner-actions">
            <button id="cookie-decline" class="btn btn-secondary btn-small">رفض</button>
            <button id="cookie-accept" class="btn btn-primary btn-small">قبول</button>
        </div>
    </div>
</div>

  
  <script src="/assets/js/core.min.js" defer></script>
  <script src="/assets/js/search.min.js" defer></script>

  
  
  <script src="/assets/js/analytics.min.js" data-ga-id="G-EWDMHPM5MG" defer></script>
  

  
  <script>if('serviceWorker' in navigator){navigator.serviceWorker.register('/sw.js')}</script>
</body>

</html>